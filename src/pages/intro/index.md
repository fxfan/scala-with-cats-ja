# Functional Programming Strategies

これは、関数型プログラミングの流儀でコードを書くための戦略について、Scalaを通して捉え、解説した本である。もし、Scalaについてほぼ理解しているものの、この言語を効果的に用いる方法に何か不足を感じているのであれば、この本はあなたに最適だろう。また、Scalaについてあまり知らない場合でも、関数型プログラミングの学習の一環としてScalaを学ぶ準備ができているなら、そんなあなたにもこの本は適している。この本では、モナドやモノイドといった一般的な関数型プログラミングの抽象概念を扱うが、それ以上に、関数型プログラマらしい思考方法について教えることを目指している。思考の結果としてのコードだけでなく、思考過程について記述しており、特に私がメタ認知的プログラミング戦略と呼ぶものに焦点を当てている。

ほとんどのプログラマは、自分がコードを発想し記述するプロセスを説明せよと言われても戸惑うのではないだろうか。一部の人は「テスト駆動開発」や「ペアプログラミング」を挙げるかもしれないが、一般的なプログラマからそれ以上の説明を期待するのは難しいだろう。それらのテクニックはどちらも90年代後半に登場したエクストリームプログラミングに由来している。その後、この分野に新たな知見が積み重ねられていることを期待したが、現実はそうではなかったようだ。とはいえ、これは開発者の責任というより、彼らの多くが明示的な手法を教えられていないことに原因がある。IT業界は確かにアジャイルやカンバンボードなどの形でプロセスについて語ることが好きだし、近年ではプログラミング教育の対象を拡げるために大変な努力が費やされている。しかし、実際のプログラミング、つまりシステム開発の要であるコードを生み出す部分は、いまだに魔法のように扱われることが多い。

関数型プログラマは単純なアイデアに対して難解な言葉を使うのを好む。だから、私が「メタ認知的プログラミング戦略」に惹かれるのも当然かもしれない。このフレーズの意味を解き明かしてみよう。「メタ認知」とは「考えることについて考える」という意味である。多くの研究が、学習におけるメタ認知の有益性と、それが専門性を高めるための重要な要素であることを示している。ただし、メタ認知を「自分の考えについて考える」というひとつの事柄として大雑把に捉えるだけでは不十分である。解像度を上げれば、メタ認知されるのはさまざまな戦略の集合であり、一般的なものもあれば、特定の分野に特化したものもある。ここから「メタ認知的プログラミング戦略」という概念が生まれる。つまり、熟練したプログラマが使用するさまざまな思考戦略に明確な名前と説明をつけようということである。

メタ認知的プログラミング戦略は、初心者にも熟練者にも有益だと私は考えている。初心者に対しては、プログラミングをより体系的で再現可能なプロセスにすることができる。ほとんどの場合、コードを生み出すのに魔法は不要となり、明確に定義された手順を適用すればよくなる。その利点はそのまま熟練者にも当てはまる。少なくとも私の経験ではそうだった（私は専門家を名乗るに十分な期間プログラムを書いてきたと思っている）。明確なプロセスがあれば、毎日それを同じ方法で実行すればよい。コードの読み書きはシンプルになり、脳のリソースをもっと重要な問題に集中させることが可能となる。ある意味、これは製造業、特に「トヨタ方式」がもたらしたプロセスや標準化の利点をプログラミングに持ち込もうとする試みだと言える。トヨタのプロセスでは、作業者が自分の仕事の進め方を考え、それをどう改善できるかを思考することが求められる。これは実質的に、組み立てラインにおけるメタ認知である。これは、作業者が日々の実際の作業に全ての注意を向ける必要がなく、思考に余裕があってはじめて可能となる。トヨタが先駆けた自動車製造における生産性と品質の劇的な向上は、このアプローチの有効性を示している。ソフトウェア開発は自動車製造ほど一様ではないが、それでも同様の恩恵が期待できるだろう。特に、現在の業界がまだ未熟な状態であることを考えればなおさらである。

次に、プログラマがどのようなメタ認知的戦略を使えるかが問題となる。その答えを考えるのに関数型プログラミングが特に適していると私は考えている。関数型プログラミングの研究では、役立つコード構造を発見し、名前を付けることが主要なテーマである。役立つ抽象概念が発見され普及すれば、プログラマが何か問題に直面したときに、その抽象概念でその問題を解決できるかどうかと考えることが可能になる。これは90年代にデザインパターンのコミュニティが行ったことと本質的には同じだが、重要な違いがある。それは、関数型プログラミングの学術的コミュニティが形式的なモデルを非常に重視しているため、関数型プログラミングの構成要素はデザインパターンが欠いている精密さを持っていることである。とはいえ、プログラミングのプロセスは単に完成したコード構造の分類にとどまらず、コードがどのように発想されてくるかという現実的な過程が含まれる。コードは通常、完全な形でキーボードから生まれるわけではなく、反復的な精緻化の中で構造を見出される。この点に関して関数型プログラミングの学術コミュニティはあまり語っていないが、「型駆動開発」などの技法に関する強い実践的な知恵がある。

過去10年ほどのプログラミングおよびプログラミング教育の中で、私は幅広い戦略を集めてきた。いくつかは他者から学んだものだが（たとえば、『[How to Design Programs](http://htdp.org/)』やその多くの派生書から大きな影響を受けている）、自分自身で発見したものもある。だが、突き詰めると、ここで紹介する内容に真新しいものはない。私の貢献は、これらの戦略を一か所にまとめて提示することにある。
